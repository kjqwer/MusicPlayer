<Window x:Class="MusicPlayer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MusicPlayer"
        xmlns:converters="clr-namespace:MusicPlayer.Converters"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        Title="HiFi Music Player" 
        MinWidth="800" MinHeight="500"
        Width="1000" Height="680"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResizeWithGrip"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        StateChanged="Window_StateChanged">

    <Window.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibility"/>
        <converters:BoolToPlayPauseIconConverter x:Key="BoolToPlayPause"/>
        <converters:BoolToFavoriteIconConverter x:Key="BoolToFavorite"/>
        <converters:BoolToShuffleOpacityConverter x:Key="BoolToShuffleOpacity"/>
        <converters:RepeatModeToOpacityConverter x:Key="RepeatModeToOpacity"/>
        <converters:BoolToShuffleTooltipConverter x:Key="BoolToShuffleTooltip"/>
        <converters:BoolToPlayPauseTooltipConverter x:Key="BoolToPlayPauseTooltip"/>
        <converters:RepeatModeToTooltipConverter x:Key="RepeatModeToTooltip"/>
        <converters:PlaylistTypeToIconConverter x:Key="PlaylistTypeToIcon"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibility"/>
        <converters:ProgressToWidthConverter x:Key="ProgressToWidthConverter"/>
        <converters:StringEmptyToVisibilityConverter x:Key="StringEmptyToVisibility"/>
        
        <!-- Local Styles -->
        <Style x:Key="Style.ListBoxItem.Playlist" TargetType="ListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource Brush.TextSecondary}"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1AFFFFFF"/>
                                <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource Brush.SurfaceHighlight}"/>
                                <Setter Property="Foreground" Value="{StaticResource Brush.Primary}"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="Style.ListBoxItem.Song" TargetType="ListBoxItem">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="Margin" Value="0,1"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1AFFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#336366F1"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <EventSetter Event="PreviewMouseRightButtonDown" Handler="OnPreviewMouseRightButtonDown"/>
        </Style>

        <Style x:Key="Style.Button.Play" TargetType="Button" BasedOn="{StaticResource Style.Button.Primary}">
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="24">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource Brush.PrimaryVariant}"/>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="{StaticResource Color.Primary}" BlurRadius="12" ShadowDepth="0" Opacity="0.5"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Opacity" Value="0.85"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid>
        <!-- Taskbar Icon -->
        <tb:TaskbarIcon x:Name="TrayIcon"
                        IconSource="/Resources/favicon.ico"
                        ToolTipText="HiFi Music Player"
                        TrayMouseDoubleClick="TrayIcon_TrayMouseDoubleClick">
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu Background="{StaticResource Brush.Surface}" Foreground="{StaticResource Brush.TextPrimary}" BorderBrush="{StaticResource Brush.Border}">
                    <MenuItem Header="Show Window" Click="ShowWindow_Click"/>
                    <MenuItem Header="Play/Pause" Click="PlayPause_Click"/>
                    <MenuItem Header="Next" Click="Next_Click"/>
                    <MenuItem Header="Previous" Click="Previous_Click"/>
                    <Separator Background="{StaticResource Brush.Border}"/>
                    <MenuItem Header="Exit" Click="Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <!-- Main Window Background -->
        <Border Background="{StaticResource Brush.Background}" 
                CornerRadius="16" 
                BorderBrush="{StaticResource Brush.Border}" 
                BorderThickness="1">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/> <!-- Title Bar -->
                    <RowDefinition Height="*"/>  <!-- Content -->
                    <RowDefinition Height="90"/> <!-- Playback Controls -->
                </Grid.RowDefinitions>

                <!-- Title Bar -->
                <Grid Grid.Row="0" Background="Transparent" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="20,0">
                        <TextBlock Text="Music" FontSize="18" FontWeight="Bold" VerticalAlignment="Center" Foreground="{StaticResource Brush.Primary}"/>
                        <TextBlock Text="Player" FontSize="18" FontWeight="Light" VerticalAlignment="Center" Margin="4,0,0,0"/>
                        
                        <!-- HiFi Badge -->
                        <Border Background="{StaticResource Brush.Primary}" CornerRadius="4" Padding="6,2" 
                                Margin="12,0,0,0" VerticalAlignment="Center"
                                Visibility="{Binding IsPlaying, Converter={StaticResource BoolToVisibility}}">
                            <TextBlock Text="HiFi" FontSize="10" Foreground="White" FontWeight="Bold"/>
                        </Border>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0">
                        <Button Style="{StaticResource Style.Button.Icon}" Click="Minimize_Click" ToolTip="最小化" Width="36" Height="36">
                            <TextBlock Text="─" FontSize="12" FontWeight="Bold"/>
                        </Button>
                        <Button Style="{StaticResource Style.Button.Icon}" Click="Compact_Click" ToolTip="小窗模式" Width="36" Height="36">
                            <TextBlock Text="▫" FontSize="16"/>
                        </Button>
                        <Button Style="{StaticResource Style.Button.Icon}" Click="Close_Click" ToolTip="关闭" Width="36" Height="36">
                            <TextBlock Text="✕" FontSize="12" Foreground="#FF6B6B"/>
                        </Button>
                    </StackPanel>
                </Grid>

                <!-- Content Area -->
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="240"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left Sidebar -->
                    <Border Grid.Column="0" Background="{StaticResource Brush.Surface}" CornerRadius="0,16,16,0" Margin="0,0,16,16" Padding="12">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="LIBRARY" Foreground="{StaticResource Brush.TextSecondary}" 
                                       FontSize="12" FontWeight="Bold" Margin="16,16,0,12"/>

                            <ListBox Grid.Row="1" x:Name="PlaylistList" 
                                     ItemsSource="{Binding Playlists}"
                                     SelectedItem="{Binding CurrentPlaylist}"
                                     ItemContainerStyle="{StaticResource Style.ListBoxItem.Playlist}">
                                <ListBox.ContextMenu>
                                    <ContextMenu Background="{StaticResource Brush.Surface}" Foreground="{StaticResource Brush.TextPrimary}" BorderBrush="{StaticResource Brush.Border}">
                                        <MenuItem Header="删除播放列表" Click="DeletePlaylist_Click"/>
                                        <MenuItem Header="刷新" Click="RefreshPlaylist_Click"/>
                                    </ContextMenu>
                                </ListBox.ContextMenu>
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Type, Converter={StaticResource PlaylistTypeToIcon}}" 
                                                       FontSize="16" VerticalAlignment="Center" Width="24" TextAlignment="Center"/>
                                            <TextBlock Text="{Binding Name}" 
                                                       FontSize="14" Margin="12,0,0,0" VerticalAlignment="Center"
                                                       TextTrimming="CharacterEllipsis"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>

                            <StackPanel Grid.Row="2" Margin="8">
                                <Button Content="+ New Playlist" Style="{StaticResource Style.Button.Base}" 
                                        HorizontalAlignment="Left" FontSize="13" Foreground="{StaticResource Brush.Primary}"
                                        Click="NewPlaylist_Click"/>
                                <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                    <Button Content="Import" Style="{StaticResource Style.Button.Base}" FontSize="12" Click="ImportPlaylist_Click"/>
                                    <Button Content="Export" Style="{StaticResource Style.Button.Base}" FontSize="12" Click="ExportPlaylist_Click"/>
                                    <Button Content="Folder" Style="{StaticResource Style.Button.Base}" FontSize="12" Click="AddFolder_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Right Song List -->
                    <Grid Grid.Column="1" Margin="0,0,20,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- Header -->
                        <Grid Grid.Row="0" Margin="10,0,10,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel>
                                <TextBlock Text="{Binding CurrentPlaylist.Name, FallbackValue='Select a Playlist'}" 
                                           FontSize="28" FontWeight="Bold" Foreground="{StaticResource Brush.TextPrimary}"/>
                                <TextBlock Text="{Binding FilteredSongsCount, StringFormat={}{0} 首歌曲}" 
                                           Foreground="{StaticResource Brush.TextSecondary}" FontSize="14" Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- Search Box -->
                        <Border Grid.Row="1" Background="{StaticResource Brush.SurfaceHighlight}" 
                                CornerRadius="8" Margin="10,0,10,12" Padding="12,8">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="🔍" VerticalAlignment="Center" Margin="0,0,8,0" Opacity="0.6"/>
                                <TextBox x:Name="SearchBox" Grid.Column="1" 
                                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                         Background="Transparent" BorderThickness="0" 
                                         Foreground="{StaticResource Brush.TextPrimary}"
                                         CaretBrush="{StaticResource Brush.Primary}"
                                         VerticalAlignment="Center" FontSize="14"/>
                                <TextBlock Grid.Column="1" Text="搜索歌曲..." 
                                           Foreground="{StaticResource Brush.TextSecondary}" 
                                           VerticalAlignment="Center" FontSize="14"
                                           IsHitTestVisible="False"
                                           Visibility="{Binding SearchText, Converter={StaticResource StringEmptyToVisibility}}"/>
                                <Button Grid.Column="2" Content="✕" Style="{StaticResource Style.Button.Icon}" 
                                        Width="24" Height="24" Click="ClearSearch_Click"
                                        Visibility="{Binding HasSearchText, Converter={StaticResource BoolToVisibility}}"/>
                            </Grid>
                        </Border>

                        <!-- Songs -->
                        <ListBox Grid.Row="2" x:Name="SongList"
                                 ItemsSource="{Binding Songs}"
                                 SelectedItem="{Binding CurrentSong}"
                                 ItemContainerStyle="{StaticResource Style.ListBoxItem.Song}"
                                 MouseDoubleClick="SongList_MouseDoubleClick"
                                 AllowDrop="True" Drop="SongList_Drop"
                                 VirtualizingStackPanel.IsVirtualizing="True"
                                 VirtualizingStackPanel.VirtualizationMode="Recycling">
                            
                            <ListBox.ContextMenu>
                                <ContextMenu x:Name="SongContextMenu" Background="{StaticResource Brush.Surface}" Foreground="{StaticResource Brush.TextPrimary}" BorderBrush="{StaticResource Brush.Border}"
                                             Opened="SongContextMenu_Opened">
                                    <MenuItem x:Name="AddToPlaylistMenu" Header="添加到播放列表"/>
                                    <MenuItem Header="收藏/取消收藏" Click="ContextMenu_ToggleFavorite_Click"/>
                                </ContextMenu>
                            </ListBox.ContextMenu>

                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Height="40">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="150"/>
                                            <ColumnDefinition Width="80"/>
                                            <ColumnDefinition Width="50"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Title & Artist -->
                                        <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding DisplayName}" FontSize="14" Foreground="{StaticResource Brush.TextPrimary}" TextTrimming="CharacterEllipsis"/>
                                            <TextBlock Text="{Binding Artist}" FontSize="12" Foreground="{StaticResource Brush.TextSecondary}" TextTrimming="CharacterEllipsis"/>
                                        </StackPanel>

                                        <!-- Album (Placeholder if available, else blank) -->
                                        <!-- <TextBlock Grid.Column="1" Text="{Binding Album}" VerticalAlignment="Center" Foreground="{StaticResource Brush.TextSecondary}"/> -->

                                        <!-- Duration -->
                                        <TextBlock Grid.Column="2" Text="{Binding DurationText}" 
                                                   VerticalAlignment="Center" HorizontalAlignment="Right" 
                                                   Foreground="{StaticResource Brush.TextSecondary}" FontSize="13"/>

                                        <!-- Favorite Button -->
                                        <Button Grid.Column="3" 
                                                Content="{Binding IsFavorite, Converter={StaticResource BoolToFavorite}}"
                                                Style="{StaticResource Style.Button.Icon}"
                                                Foreground="{StaticResource Brush.Primary}"
                                                Click="ToggleFavorite_Click" Tag="{Binding}"
                                                HorizontalAlignment="Center"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <!-- Empty State -->
                        <StackPanel Grid.Row="2" VerticalAlignment="Center" HorizontalAlignment="Center"
                                    Visibility="{Binding Songs.Count, Converter={StaticResource NullToVisibility}, ConverterParameter=Inverse}">
                            <TextBlock Text="♪" FontSize="64" HorizontalAlignment="Center" Opacity="0.1" Foreground="{StaticResource Brush.TextPrimary}"/>
                            <TextBlock Text="Drag and drop music files here" Foreground="{StaticResource Brush.TextSecondary}" 
                                       HorizontalAlignment="Center" Margin="0,16,0,0" FontSize="16"/>
                        </StackPanel>
                    </Grid>
                </Grid>

                <!-- Bottom Player Control -->
                <Border Grid.Row="2" Background="{StaticResource Brush.Surface}" 
                        BorderBrush="{StaticResource Brush.Border}" BorderThickness="0,1,0,0"
                        CornerRadius="0,0,16,16" Padding="20,12,20,16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>

                        <!-- Current Song Info -->
                        <Grid Grid.Column="0" Visibility="{Binding HasCurrentSong, Converter={StaticResource BoolToVisibility}}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/> <!-- Album Art -->
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/> <!-- Favorite Button -->
                            </Grid.ColumnDefinitions>
                            
                            <Border Width="48" Height="48" Background="{StaticResource Brush.SurfaceHighlight}" CornerRadius="8" Margin="0,0,12,0">
                                <TextBlock Text="♪" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Opacity="0.5"/>
                            </Border>
                            
                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                <TextBlock Text="{Binding CurrentSong.DisplayName}" 
                                           Foreground="{StaticResource Brush.TextPrimary}" FontWeight="SemiBold"
                                           TextTrimming="CharacterEllipsis" MaxWidth="140"/>
                                <TextBlock Text="{Binding CurrentSong.Artist}" 
                                           Foreground="{StaticResource Brush.TextSecondary}" FontSize="12"
                                           TextTrimming="CharacterEllipsis" MaxWidth="140"/>
                            </StackPanel>
                            
                            <!-- Favorite Button -->
                            <Button Grid.Column="2" 
                                    Content="{Binding CurrentSong.IsFavorite, Converter={StaticResource BoolToFavorite}}"
                                    Style="{StaticResource Style.Button.Icon}"
                                    Foreground="{StaticResource Brush.Primary}"
                                    Click="CurrentSongFavorite_Click"
                                    ToolTip="收藏/取消收藏"
                                    Margin="8,0,0,0"/>
                        </Grid>

                        <!-- Controls & Progress -->
                        <Grid Grid.Column="1">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Buttons -->
                            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,8">
                                <Button Content="⇄" Style="{StaticResource Style.Button.Icon}"
                                        Opacity="{Binding ShuffleMode, Converter={StaticResource BoolToShuffleOpacity}}"
                                        Click="Shuffle_Click" Margin="0,0,16,0"
                                        ToolTip="{Binding ShuffleMode, Converter={StaticResource BoolToShuffleTooltip}}"/>
                                
                                <Button Content="‹‹" Style="{StaticResource Style.Button.Icon}" Click="Previous_Click" Margin="0,0,16,0"
                                        ToolTip="上一首"/>
                                
                                <Button Content="{Binding IsPlaying, Converter={StaticResource BoolToPlayPause}}" 
                                        Style="{StaticResource Style.Button.Play}" 
                                        Click="PlayPause_Click"
                                        ToolTip="{Binding IsPlaying, Converter={StaticResource BoolToPlayPauseTooltip}}"/>
                                
                                <Button Content="››" Style="{StaticResource Style.Button.Icon}" Click="Next_Click" Margin="16,0,0,0"
                                        ToolTip="下一首"/>
                                
                                <Button Content="{Binding RepeatModeText}" Style="{StaticResource Style.Button.Icon}"
                                        Opacity="{Binding RepeatMode, Converter={StaticResource RepeatModeToOpacity}}"
                                        Click="Repeat_Click" Margin="16,0,0,0"
                                        ToolTip="{Binding RepeatMode, Converter={StaticResource RepeatModeToTooltip}}"/>
                            </StackPanel>

                            <!-- Progress Bar -->
                            <Grid Grid.Row="1" VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="40"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Text="{Binding CurrentPositionText}" Foreground="{StaticResource Brush.TextSecondary}" FontSize="11" HorizontalAlignment="Right" Margin="0,0,8,0"/>
                                
                                <Slider Grid.Column="1" x:Name="ProgressSlider"
                                        Minimum="0" Maximum="{Binding TotalDuration}"
                                        Value="{Binding CurrentPosition, Mode=OneWay}"
                                        VerticalAlignment="Center"
                                        Thumb.DragStarted="ProgressSlider_DragStarted"
                                        Thumb.DragCompleted="ProgressSlider_DragCompleted"
                                        PreviewMouseLeftButtonDown="ProgressSlider_PreviewMouseDown"
                                        Cursor="Hand"/>
                                
                                <TextBlock Grid.Column="2" Text="{Binding TotalDurationText}" Foreground="{StaticResource Brush.TextSecondary}" FontSize="11" HorizontalAlignment="Left" Margin="8,0,0,0"/>
                            </Grid>
                        </Grid>

                        <!-- Volume -->
                        <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                            <TextBlock Text="VOL" Foreground="{StaticResource Brush.TextSecondary}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <Slider x:Name="VolumeSlider" Width="100" Minimum="0" Maximum="1" Value="{Binding Volume}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</Window>
